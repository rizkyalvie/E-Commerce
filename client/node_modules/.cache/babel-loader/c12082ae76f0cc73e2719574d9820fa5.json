{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bootcamp\\\\Stage 2\\\\client\\\\src\\\\Pages\\\\admin\\\\ProductAdmin.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"../../Css/product.module.css\";\nimport Navbar from \"../../Components/nav/navAdmin\";\nimport { API } from \"../../config/api\";\nimport Modal from \"../../Components/category/modal\";\nimport { useQuery } from 'react-query';\nimport { useState } from \"react\";\nimport { useEffect, useMutation } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Product() {\n  _s();\n\n  const [modal, setModal] = useState(false);\n  const title = 'Product Admin';\n  document.title = 'DumbMerch | ' + title;\n  const [idDelete, setIdDelete] = useState(null);\n  const [confirmDelete, setConfirmDelete] = useState(null);\n  let {\n    data: products,\n    refetch\n  } = useQuery('productsCache', async () => {\n    const response = await API.get('/products');\n    console.log(response.data.data.products[0].image);\n    return response.data.data.products;\n  });\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const handleDelete = id => {\n    setIdDelete(id);\n    handleShow();\n  };\n\n  const deleteById = useMutation(async id => {\n    try {\n      await API.delete(`/product/${id}`);\n      refetch();\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  useEffect(() => {\n    if (confirmDelete) {\n      handleClose();\n      deleteById.mutate(idDelete);\n      setConfirmDelete(null);\n    }\n  }, [confirmDelete]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.catContainer,\n        children: (products === null || products === void 0 ? void 0 : products.length) !== 0 && /*#__PURE__*/_jsxDEV(\"table\", {\n          className: styles.contentTable,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Photo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Product Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Product Desc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Qty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: products === null || products === void 0 ? void 0 : products.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: item.image,\n                  target: \"_blank\",\n                  children: \"Click to see\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    overflow: 'hidden',\n                    height: '3.9rem',\n                    width: '20rem'\n                  },\n                  children: item.desc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.qty\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(Link, {\n                  to: `/update-product/` + item.id,\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: styles.edit,\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: styles.delete,\n                  onClick: () => {\n                    handleDelete(item.id);\n                  },\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), modal && /*#__PURE__*/_jsxDEV(Modal, {\n      setConfirmDelete: setConfirmDelete,\n      handleClose: handleClose,\n      show: show,\n      closeModal: setModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Product, \"gi5LPV3l3NldX8a+4jjx/N4vCGk=\", false, function () {\n  return [useQuery, useMutation];\n});\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"names":["styles","Navbar","API","Modal","useQuery","useState","useEffect","useMutation","Link","useNavigate","Product","modal","setModal","title","document","idDelete","setIdDelete","confirmDelete","setConfirmDelete","data","products","refetch","response","get","console","log","image","show","setShow","handleClose","handleShow","handleDelete","id","deleteById","delete","error","mutate","container","catContainer","length","contentTable","map","item","index","name","overflow","height","width","desc","price","qty","edit"],"sources":["D:/Bootcamp/Stage 2/client/src/Pages/admin/ProductAdmin.js"],"sourcesContent":["import styles from \"../../Css/product.module.css\";\r\nimport Navbar from \"../../Components/nav/navAdmin\";\r\nimport {API} from \"../../config/api\"\r\nimport Modal from \"../../Components/category/modal\"\r\nimport {useQuery} from 'react-query'\r\nimport {useState} from \"react\"\r\nimport {useEffect, useMutation} from 'react'\r\nimport {Link,useNavigate} from 'react-router-dom'\r\n\r\nfunction Product() {\r\n  const [modal, setModal] = useState(false)\r\n\r\n  const title = 'Product Admin';\r\n  document.title = 'DumbMerch | ' + title;\r\n\r\n  const [idDelete, setIdDelete] = useState(null);\r\n  const [confirmDelete, setConfirmDelete] = useState(null);\r\n\r\n  let { data: products, refetch } = useQuery('productsCache', async () => {\r\n    const response = await API.get('/products');\r\n    console.log(response.data.data.products[0].image)\r\n    return response.data.data.products\r\n  });\r\n\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleDelete = (id) => {\r\n    setIdDelete(id);\r\n    handleShow();\r\n  };\r\n\r\n  const deleteById = useMutation(async (id) => {\r\n    try {\r\n      await API.delete(`/product/${id}`);\r\n      refetch();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (confirmDelete) {\r\n      handleClose();\r\n      deleteById.mutate(idDelete);\r\n      setConfirmDelete(null);\r\n    }\r\n  }, [confirmDelete]);\r\n\r\n  \r\n\r\n  return (\r\n    <div>\r\n      <Navbar />\r\n      <div className={styles.container}>\r\n        <div className={styles.catContainer}>\r\n          {products?.length !==0 && \r\n          <table className={styles.contentTable}>\r\n          <thead>\r\n            <tr>\r\n              <th>No</th>\r\n              <th>Photo</th>\r\n              <th>Product Name</th>\r\n              <th>Product Desc</th>\r\n              <th>Price</th>\r\n              <th>Qty</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n          {products?.map((item, index) => (\r\n                <tr key={index}> \r\n                  <td>{index + 1}</td>\r\n                  <td><a href={item.image} target=\"_blank\">Click to see</a></td>\r\n                  <td>{item.name}</td>\r\n                  <td><div style={{\r\n                    overflow: 'hidden',\r\n                    height: '3.9rem',\r\n                    width: '20rem'\r\n                }}>{item.desc}</div></td>\r\n                  <td>{item.price}</td>\r\n                  <td>{item.qty}</td>\r\n                  <td>\r\n                  <Link to={`/update-product/` + item.id}>\r\n                  <button className={styles.edit}>Edit</button>\r\n                  </Link>\r\n                  <button\r\n                    className={styles.delete}\r\n                    onClick={() => { handleDelete(item.id); }}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </td>\r\n                </tr>\r\n              ))}\r\n            </tbody> \r\n        </table>}\r\n        </div>\r\n      </div>\r\n      {modal && <Modal \r\n      setConfirmDelete={setConfirmDelete}\r\n      handleClose={handleClose}\r\n      show={show}\r\n      closeModal={setModal}/>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Product;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}