{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bootcamp\\\\Stage 2\\\\client\\\\src\\\\Pages\\\\admin\\\\DetailProductAdmin.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"../../Css/detail.module.css\";\nimport Navbar from \"../../Components/nav/nav\";\nimport convertRupiah from \"rupiah-format\";\nimport { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useQuery, useMutation } from \"react-query\";\nimport { API } from \"../../config/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Detail() {\n  _s();\n\n  let history = useNavigate();\n  let {\n    id\n  } = useParams();\n  let api = API(); // Fetching product data from database\n\n  let {\n    data: product\n  } = useQuery('productCache', async () => {\n    const response = await API.get('/product/' + id);\n    console.log(response.data.data.products);\n    return response.data.data.products;\n  }); // Create config Snap payment page with useEffect here ...\n\n  useEffect(() => {\n    //change thi s to the script source you want to load, for example this is snap.js sandbox env\n    const midtransScriptUrl = \"https://app.sandbox.midtrans.com/snap/snap.js\"; //change this according to your client-key\n\n    const myMidtransClientKey = \"SB-Mid-client-4fo-5Pa0JvZkR1X6\";\n    let scriptTag = document.createElement(\"script\");\n    scriptTag.src = midtransScriptUrl; // optional if you want to set script attribute\n    // for example snap.js have data-client-key attribute\n\n    scriptTag.setAttribute(\"data-client-key\", myMidtransClientKey);\n    document.body.appendChild(scriptTag);\n    return () => {\n      document.body.removeChild(scriptTag);\n    };\n  }, []);\n  const handleBuy = useMutation(async e => {\n    try {\n      e.preventDefault();\n      const config = {\n        headers: {\n          'Content-type': 'application/json'\n        }\n      };\n      const data = {\n        idProduct: product.id,\n        idSeller: product.users.id,\n        price: product.price\n      };\n      const body = JSON.stringify(data);\n      const response = await API.post('/transaction', body, config); // Create variabel for store token payment from response here ...\n\n      const token = response.data.payment.token; // Init Snap for display payment page with token here ...\n\n      window.snap.pay(token, {\n        onSuccess: function (result) {\n          /* You may add your own implementation here */\n          console.log(result);\n          navigate(\"/user/profile\");\n        },\n        onPending: function (result) {\n          /* You may add your own implementation here */\n          console.log(result);\n          navigate(\"/user/profile\");\n        },\n        onError: function (result) {\n          /* You may add your own implementation here */\n          console.log(result);\n        },\n        onClose: function () {\n          /* You may add your own implementation here */\n          alert(\"you closed the popup without finishing the payment\");\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.detailContainer,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.productDetail,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.leftDetail,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product === null || product === void 0 ? void 0 : product.image,\n            alt: \"Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.rightDetail,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.productTitle,\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: product === null || product === void 0 ? void 0 : product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.productStock,\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              children: [\"Stock: \", product === null || product === void 0 ? void 0 : product.qty]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.productDesc,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '2rem',\n                fontWeight: 'bold'\n              },\n              children: \"Description:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product === null || product === void 0 ? void 0 : product.desc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.productPrice,\n            children: convertRupiah.convert(product === null || product === void 0 ? void 0 : product.price)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => {\n        handleBuy.mutate(e);\n      },\n      children: \"Buy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Detail, \"thMm8hdTqeiLfcIYBGlNlWOJqMo=\", false, function () {\n  return [useNavigate, useParams, useQuery, useMutation];\n});\n\n_c = Detail;\nexport default Detail;\n\nvar _c;\n\n$RefreshReg$(_c, \"Detail\");","map":{"version":3,"names":["styles","Navbar","convertRupiah","useEffect","useState","useParams","useNavigate","useQuery","useMutation","API","Detail","history","id","api","data","product","response","get","console","log","products","midtransScriptUrl","myMidtransClientKey","scriptTag","document","createElement","src","setAttribute","body","appendChild","removeChild","handleBuy","e","preventDefault","config","headers","idProduct","idSeller","users","price","JSON","stringify","post","token","payment","window","snap","pay","onSuccess","result","navigate","onPending","onError","onClose","alert","error","container","detailContainer","productDetail","leftDetail","image","rightDetail","productTitle","name","productStock","qty","productDesc","fontSize","fontWeight","desc","productPrice","convert","mutate"],"sources":["D:/Bootcamp/Stage 2/client/src/Pages/admin/DetailProductAdmin.js"],"sourcesContent":["import styles from \"../../Css/detail.module.css\";\r\nimport Navbar from \"../../Components/nav/nav\";\r\nimport convertRupiah from \"rupiah-format\"\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useQuery, useMutation } from \"react-query\";\r\nimport { API } from \"../../config/api\";\r\n\r\nfunction Detail() {\r\n    let history = useNavigate();\r\n  let { id } = useParams();\r\n  let api = API();\r\n\r\n  // Fetching product data from database\r\n  let { data: product } = useQuery('productCache', async () => {\r\n    const response = await API.get('/product/' + id);\r\n    console.log(response.data.data.products)\r\n    return response.data.data.products;\r\n  });\r\n\r\n  // Create config Snap payment page with useEffect here ...\r\n  useEffect(()=>{\r\n    //change thi s to the script source you want to load, for example this is snap.js sandbox env\r\n    const midtransScriptUrl = \"https://app.sandbox.midtrans.com/snap/snap.js\";\r\n    //change this according to your client-key\r\n    const myMidtransClientKey = \"SB-Mid-client-4fo-5Pa0JvZkR1X6\";\r\n\r\n    let scriptTag = document.createElement(\"script\");\r\n    scriptTag.src = midtransScriptUrl;\r\n    // optional if you want to set script attribute\r\n    // for example snap.js have data-client-key attribute\r\n    scriptTag.setAttribute(\"data-client-key\", myMidtransClientKey);\r\n\r\n    document.body.appendChild(scriptTag);\r\n    return () => {\r\n      document.body.removeChild(scriptTag);\r\n    };\r\n  },[])\r\n\r\n  const handleBuy = useMutation(async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n\r\n      const config = {\r\n        headers: {\r\n          'Content-type': 'application/json',\r\n        },\r\n      };\r\n\r\n      const data = {\r\n        idProduct: product.id,\r\n        idSeller: product.users.id,\r\n        price: product.price,\r\n      };\r\n\r\n      const body = JSON.stringify(data);\r\n\r\n      const response = await API.post('/transaction', body, config);\r\n\r\n      // Create variabel for store token payment from response here ...\r\n      const token = response.data.payment.token;\r\n\r\n      // Init Snap for display payment page with token here ...\r\n      window.snap.pay(token, {\r\n        onSuccess: function (result) {\r\n          /* You may add your own implementation here */\r\n          console.log(result);\r\n          navigate(\"/user/profile\");\r\n        },\r\n        onPending: function (result) {\r\n          /* You may add your own implementation here */\r\n          console.log(result);\r\n          navigate(\"/user/profile\");\r\n        },\r\n        onError: function (result) {\r\n          /* You may add your own implementation here */\r\n          console.log(result);\r\n        },\r\n        onClose: function () {\r\n          /* You may add your own implementation here */\r\n          alert(\"you closed the popup without finishing the payment\");\r\n        },\r\n      })\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  });\r\n  return (\r\n    <div className={styles.container}>\r\n      <Navbar />\r\n      <div className={styles.detailContainer}>\r\n        <div className={styles.productDetail}>\r\n          <div className={styles.leftDetail}>\r\n            <img src={product?.image} alt=\"Product\" />\r\n          </div>\r\n          <div className={styles.rightDetail}>\r\n            <div className={styles.productTitle}>\r\n              <h1>{product?.name}</h1>\r\n            </div>\r\n            <div className={styles.productStock}>\r\n              <small>Stock: {product?.qty}</small>\r\n            </div>\r\n            <div className={styles.productDesc}>\r\n              <p style={{\r\n                fontSize: '2rem',\r\n                fontWeight: 'bold'\r\n              }}>Description:</p>\r\n              <p>\r\n                {product?.desc}\r\n              </p>\r\n            </div>\r\n            <div className={styles.productPrice}>{convertRupiah.convert(product?.price)}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <button onClick={(e) => {handleBuy.mutate(e)}}>Buy</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Detail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}