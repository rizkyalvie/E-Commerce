{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bootcamp\\\\Stage 2\\\\client\\\\src\\\\Components\\\\profile\\\\editProfile.js\",\n    _s = $RefreshSig$();\n\nimport { Form, Button } from \"react-bootstrap\";\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router';\nimport { useQuery, useMutation } from 'react-query';\nimport { API } from '../../config/api';\nimport styles from \"../../Css/profile.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditProfile() {\n  _s();\n\n  const title = 'Profile User';\n  document.title = 'DumbMerch | ' + title;\n  let navigate = useNavigate();\n  const [preview, setPreview] = useState(null); //For image preview\n\n  const [profile, setProfile] = useState({}); //Store profile data\n\n  const [form, setForm] = useState({\n    image: '',\n    phone: '',\n    gender: '',\n    address: ''\n  }); //Store profile data\n  // Fetching detail profile data by id from database\n\n  let {\n    data: profiles,\n    refetch\n  } = useQuery('profileCache', async () => {\n    const response = await API.get('/profile');\n    return response.data.data;\n  });\n  useEffect(() => {\n    if (profiles) {\n      setPreview(profiles.image);\n      setForm({ ...form,\n        name: profiles.users.name,\n        phone: profiles.phone,\n        gender: profiles.gender,\n        address: profiles.address\n      });\n      setProfile(profiles);\n    }\n  }, [profiles]); // Handle change data on form\n\n  const handleChange = e => {\n    setForm({ ...form,\n      [e.target.name]: e.target.type === 'file' ? e.target.files : e.target.value\n    }); // Create image url for preview\n\n    if (e.target.type === 'file') {\n      let url = URL.createObjectURL(e.target.files[0]);\n      setPreview(url);\n    }\n  };\n\n  const handleSubmit = useMutation(async e => {\n    try {\n      e.preventDefault(); // Configuration\n\n      const config = {\n        headers: {\n          'Content-type': 'multipart/form-data'\n        }\n      }; // Store data with FormData as object\n\n      const formData = new FormData();\n\n      if (form.image) {\n        var _form$image$;\n\n        formData.set('image', form === null || form === void 0 ? void 0 : form.image[0], form === null || form === void 0 ? void 0 : (_form$image$ = form.image[0]) === null || _form$image$ === void 0 ? void 0 : _form$image$.name);\n      }\n\n      formData.set('name', form.name);\n      formData.set('phone', form.phone);\n      formData.set('gender', form.gender);\n      formData.set('address', form.address); // Insert profile data\n\n      const response = await API.patch('/profile', formData, config);\n      console.log(response.data);\n      navigate('/user/profile');\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"table-title\",\n        children: \"Edit Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: e => handleSubmit.mutate(e),\n        children: [preview && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: preview,\n            style: {\n              maxWidth: '150px',\n              maxHeight: '150px',\n              objectFit: 'cover'\n            },\n            alt: \"preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"upload\",\n          name: \"image\",\n          hidden: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"upload\",\n          className: \"label-file-add-product\",\n          children: \"Upload File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: handleChange,\n          value: form === null || form === void 0 ? void 0 : form.name,\n          name: \"name\",\n          placeholder: \"Name\",\n          className: \"mt-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: handleChange,\n          value: form === null || form === void 0 ? void 0 : form.phone,\n          name: \"phone\",\n          placeholder: \"Phone\",\n          className: \"mt-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          \"aria-label\": \"Default select example\",\n          onChange: handleChange,\n          value: form === null || form === void 0 ? void 0 : form.gender,\n          name: \"gender\",\n          className: \"mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Gender\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Male\",\n            children: \"Male\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Female\",\n            children: \"Female\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          as: \"textarea\",\n          rows: 3,\n          onChange: handleChange,\n          value: form === null || form === void 0 ? void 0 : form.address,\n          name: \"address\",\n          placeholder: \"Address\",\n          className: \"mt-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EditProfile, \"5n/vpZnhrb3XYU4dhkpoFxjRQug=\", false, function () {\n  return [useNavigate, useQuery, useMutation];\n});\n\n_c = EditProfile;\nexport default EditProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfile\");","map":{"version":3,"names":["Form","Button","useState","useEffect","useNavigate","useQuery","useMutation","API","styles","EditProfile","title","document","navigate","preview","setPreview","profile","setProfile","form","setForm","image","phone","gender","address","data","profiles","refetch","response","get","name","users","handleChange","e","target","type","files","value","url","URL","createObjectURL","handleSubmit","preventDefault","config","headers","formData","FormData","set","patch","console","log","error","mutate","maxWidth","maxHeight","objectFit"],"sources":["D:/Bootcamp/Stage 2/client/src/Components/profile/editProfile.js"],"sourcesContent":["import { Form, Button } from \"react-bootstrap\";\r\nimport { useState, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router';\r\nimport { useQuery, useMutation } from 'react-query';\r\nimport { API } from '../../config/api';\r\nimport styles from \"../../Css/profile.module.css\"\r\n\r\nfunction EditProfile() {\r\n    const title = 'Profile User';\r\n    document.title = 'DumbMerch | ' + title;\r\n\r\n    let navigate = useNavigate();\r\n\r\n    const [preview, setPreview] = useState(null); //For image preview\r\n    const [profile, setProfile] = useState({}); //Store profile data\r\n    const [form, setForm] = useState({\r\n        image: '',\r\n        phone: '',\r\n        gender: '',\r\n        address: '',\r\n    }); //Store profile data\r\n\r\n\r\n    // Fetching detail profile data by id from database\r\n    let { data: profiles, refetch } = useQuery('profileCache', async () => {\r\n        const response = await API.get('/profile');\r\n        return response.data.data;\r\n      });\r\n    \r\n      useEffect(() => {\r\n        if (profiles) {\r\n          setPreview(profiles.image);\r\n          setForm({\r\n            ...form,\r\n            name: profiles.users.name,\r\n            phone: profiles.phone,\r\n            gender: profiles.gender,\r\n            address: profiles.address,\r\n          });\r\n          setProfile(profiles);\r\n        }\r\n      }, [profiles]);\r\n\r\n    // Handle change data on form\r\n    const handleChange = (e) => {\r\n        setForm({\r\n            ...form,\r\n            [e.target.name]:\r\n                e.target.type === 'file' ? e.target.files : e.target.value,\r\n        });\r\n\r\n        // Create image url for preview\r\n        if (e.target.type === 'file') {\r\n            let url = URL.createObjectURL(e.target.files[0]);\r\n            setPreview(url);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = useMutation(async (e) => {\r\n        try {\r\n            e.preventDefault();\r\n\r\n            // Configuration\r\n            const config = {\r\n                headers: {\r\n                    'Content-type': 'multipart/form-data',\r\n                },\r\n            };\r\n\r\n            // Store data with FormData as object\r\n            const formData = new FormData();\r\n            if (form.image) {\r\n                formData.set('image', form?.image[0], form?.image[0]?.name);\r\n            }\r\n            formData.set('name', form.name);\r\n            formData.set('phone', form.phone);\r\n            formData.set('gender', form.gender);\r\n            formData.set('address', form.address);\r\n\r\n            // Insert profile data\r\n            const response = await API.patch('/profile', formData, config);\r\n\r\n            console.log(response.data);\r\n\r\n            navigate('/user/profile');\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"editContainer\">\r\n                <p className=\"table-title\">Edit Profile</p>\r\n                <Form onSubmit={(e) => handleSubmit.mutate(e)}>\r\n                    {preview && (\r\n                        <div>\r\n                            <img\r\n                                src={preview}\r\n                                style={{\r\n                                    maxWidth: '150px',\r\n                                    maxHeight: '150px',\r\n                                    objectFit: 'cover',\r\n                                }}\r\n                                alt=\"preview\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    <input\r\n                        type=\"file\"\r\n                        id=\"upload\"\r\n                        name=\"image\"\r\n                        hidden\r\n                        onChange={handleChange}\r\n                    />\r\n                    <label for=\"upload\" className=\"label-file-add-product\">\r\n                        Upload File\r\n                    </label>\r\n                        <input type=\"text\" onChange={handleChange} value={form?.name} name=\"name\" placeholder=\"Name\" className='mt-3'></input>\r\n                        <input type=\"text\" onChange={handleChange} value={form?.phone} name=\"phone\" placeholder=\"Phone\" className='mt-3'></input>\r\n                    <select aria-label=\"Default select example\" onChange={handleChange} value={form?.gender} name=\"gender\" className=\"mt-3\">\r\n                        <option>Gender</option>\r\n                        <option value=\"Male\">Male</option>\r\n                        <option value=\"Female\">Female</option>\r\n                    </select>\r\n                        <input as=\"textarea\" rows={3} onChange={handleChange} value={form?.address} name=\"address\" placeholder=\"Address\" className='mt-3'></input>\r\n                    <Button type=\"submit\">Save</Button>\r\n                </Form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EditProfile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}