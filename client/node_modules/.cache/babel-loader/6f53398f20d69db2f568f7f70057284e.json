{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bootcamp\\\\Stage 2\\\\client\\\\src\\\\Components\\\\login\\\\loginCard.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"../../Css/login.module.css\";\nimport Alert from \"../alert\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useContext, useState } from 'react';\nimport { UserContext } from '../../context/userContext';\nimport { useMutation } from 'react-query';\nimport { API } from '../../config/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginCard() {\n  _s();\n\n  let navigate = useNavigate();\n  const title = 'Login';\n  document.title = 'DumbMerch | ' + title;\n  const [state, dispatch] = useContext(UserContext);\n  console.log(state);\n  const [message, setMessage] = useState(null);\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n  const {\n    email,\n    password\n  } = form;\n\n  const handleChange = e => {\n    setForm({ ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = useMutation(async e => {\n    try {\n      e.preventDefault();\n      const config = {\n        headers: {\n          'Content-type': 'application/json'\n        }\n      };\n      const body = JSON.stringify(form);\n      const response = await API.post('/login', body, config);\n      const userStatus = response.data.data.user.status;\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: response.data.data.user\n      });\n\n      if (userStatus == 'user') {\n        navigate('/');\n      } else if (userStatus == 'admin') {\n        navigate('/home-admin');\n      }\n\n      setMessage(null);\n    } catch (error) {\n      const alert = /*#__PURE__*/_jsxDEV(Alert, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this);\n\n      setMessage(alert);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.loginCard,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => handleSubmit.mutate(e),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.cardForm,\n        children: [message && message, /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange,\n          name: \"email\",\n          type: \"text\",\n          value: email,\n          placeholder: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange,\n          name: \"password\",\n          value: password,\n          type: \"password\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginCard, \"/UrKwbfB69+XWs/Rge/k6pEVkgI=\", false, function () {\n  return [useNavigate, useMutation];\n});\n\n_c = LoginCard;\nexport default LoginCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginCard\");","map":{"version":3,"names":["styles","Alert","useNavigate","useContext","useState","UserContext","useMutation","API","LoginCard","navigate","title","document","state","dispatch","console","log","message","setMessage","form","setForm","email","password","handleChange","e","target","name","value","handleSubmit","preventDefault","config","headers","body","JSON","stringify","response","post","userStatus","data","user","status","type","payload","error","alert","loginCard","mutate","cardForm"],"sources":["D:/Bootcamp/Stage 2/client/src/Components/login/loginCard.js"],"sourcesContent":["import styles from \"../../Css/login.module.css\";\r\nimport Alert from \"../alert\"\r\nimport {useNavigate} from \"react-router-dom\"\r\nimport { useContext, useState } from 'react';\r\nimport { UserContext } from '../../context/userContext';\r\nimport { useMutation } from 'react-query'\r\nimport { API } from '../../config/api'\r\n\r\n\r\n\r\nfunction LoginCard() {\r\n  let navigate = useNavigate()\r\n\r\n  const title = 'Login';\r\n  document.title = 'DumbMerch | ' + title;\r\n\r\n  const [state, dispatch] = useContext(UserContext);\r\n\r\n  console.log(state)\r\n\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const [form, setForm] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const { email, password } = form;\r\n\r\n  const handleChange = (e) => {\r\n    setForm({\r\n      ...form,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = useMutation(async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n  \r\n      const config = {\r\n        headers: {\r\n          'Content-type': 'application/json',\r\n        },\r\n      };\r\n  \r\n      const body = JSON.stringify(form);\r\n  \r\n      const response = await API.post('/login', body, config);\r\n  \r\n      const userStatus = response.data.data.user.status\r\n\r\n      dispatch({\r\n        type: 'LOGIN_SUCCESS',\r\n        payload: response.data.data.user\r\n      })\r\n      \r\n      if(userStatus == 'user'){\r\n        navigate('/')\r\n      } else if(userStatus == 'admin' ){ \r\n        navigate('/home-admin')\r\n      }\r\n      \r\n      setMessage(null);\r\n    } catch (error) {\r\n\r\n      const alert = (\r\n        <Alert/>\r\n      )\r\n      setMessage(alert)\r\n    }\r\n  });\r\n\r\n  \r\n  return (\r\n    <div className={styles.loginCard}>\r\n      <h1>Login</h1>\r\n      <form onSubmit={(e) => handleSubmit.mutate(e)}>\r\n        <div className={styles.cardForm}>\r\n          {message && message}\r\n          <input onChange={handleChange} name=\"email\" type=\"text\" value={email} placeholder=\"Email\" />\r\n          <input onChange={handleChange} name=\"password\" value={password} type=\"password\" placeholder=\"Password\" />\r\n          <button type=\"submit\">Login</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginCard;\r\n"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,4BAAnB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,GAAT,QAAoB,kBAApB;;;AAIA,SAASC,SAAT,GAAqB;EAAA;;EACnB,IAAIC,QAAQ,GAAGP,WAAW,EAA1B;EAEA,MAAMQ,KAAK,GAAG,OAAd;EACAC,QAAQ,CAACD,KAAT,GAAiB,iBAAiBA,KAAlC;EAEA,MAAM,CAACE,KAAD,EAAQC,QAAR,IAAoBV,UAAU,CAACE,WAAD,CAApC;EAEAS,OAAO,CAACC,GAAR,CAAYH,KAAZ;EAEA,MAAM,CAACI,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,IAAD,CAAtC;EAEA,MAAM,CAACc,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAAC;IAC/BgB,KAAK,EAAE,EADwB;IAE/BC,QAAQ,EAAE;EAFqB,CAAD,CAAhC;EAKA,MAAM;IAAED,KAAF;IAASC;EAAT,IAAsBH,IAA5B;;EAEA,MAAMI,YAAY,GAAIC,CAAD,IAAO;IAC1BJ,OAAO,CAAC,EACN,GAAGD,IADG;MAEN,CAACK,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE;IAFpB,CAAD,CAAP;EAID,CALD;;EAOA,MAAMC,YAAY,GAAGrB,WAAW,CAAC,MAAOiB,CAAP,IAAa;IAC5C,IAAI;MACFA,CAAC,CAACK,cAAF;MAEA,MAAMC,MAAM,GAAG;QACbC,OAAO,EAAE;UACP,gBAAgB;QADT;MADI,CAAf;MAMA,MAAMC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAef,IAAf,CAAb;MAEA,MAAMgB,QAAQ,GAAG,MAAM3B,GAAG,CAAC4B,IAAJ,CAAS,QAAT,EAAmBJ,IAAnB,EAAyBF,MAAzB,CAAvB;MAEA,MAAMO,UAAU,GAAGF,QAAQ,CAACG,IAAT,CAAcA,IAAd,CAAmBC,IAAnB,CAAwBC,MAA3C;MAEA1B,QAAQ,CAAC;QACP2B,IAAI,EAAE,eADC;QAEPC,OAAO,EAAEP,QAAQ,CAACG,IAAT,CAAcA,IAAd,CAAmBC;MAFrB,CAAD,CAAR;;MAKA,IAAGF,UAAU,IAAI,MAAjB,EAAwB;QACtB3B,QAAQ,CAAC,GAAD,CAAR;MACD,CAFD,MAEO,IAAG2B,UAAU,IAAI,OAAjB,EAA0B;QAC/B3B,QAAQ,CAAC,aAAD,CAAR;MACD;;MAEDQ,UAAU,CAAC,IAAD,CAAV;IACD,CA3BD,CA2BE,OAAOyB,KAAP,EAAc;MAEd,MAAMC,KAAK,gBACT,QAAC,KAAD;QAAA;QAAA;QAAA;MAAA,QADF;;MAGA1B,UAAU,CAAC0B,KAAD,CAAV;IACD;EACF,CAnC+B,CAAhC;EAsCA,oBACE;IAAK,SAAS,EAAE3C,MAAM,CAAC4C,SAAvB;IAAA,wBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAM,QAAQ,EAAGrB,CAAD,IAAOI,YAAY,CAACkB,MAAb,CAAoBtB,CAApB,CAAvB;MAAA,uBACE;QAAK,SAAS,EAAEvB,MAAM,CAAC8C,QAAvB;QAAA,WACG9B,OAAO,IAAIA,OADd,eAEE;UAAO,QAAQ,EAAEM,YAAjB;UAA+B,IAAI,EAAC,OAApC;UAA4C,IAAI,EAAC,MAAjD;UAAwD,KAAK,EAAEF,KAA/D;UAAsE,WAAW,EAAC;QAAlF;UAAA;UAAA;UAAA;QAAA,QAFF,eAGE;UAAO,QAAQ,EAAEE,YAAjB;UAA+B,IAAI,EAAC,UAApC;UAA+C,KAAK,EAAED,QAAtD;UAAgE,IAAI,EAAC,UAArE;UAAgF,WAAW,EAAC;QAA5F;UAAA;UAAA;UAAA;QAAA,QAHF,eAIE;UAAQ,IAAI,EAAC,QAAb;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAJF;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAaD;;GA7EQb,S;UACQN,W,EAyBMI,W;;;KA1BdE,S;AA+ET,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}