{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bootcamp\\\\Stage 2\\\\client\\\\src\\\\Pages\\\\customer\\\\DetailProduct.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"../../Css/detail.module.css\";\nimport Navbar from \"../../Components/nav/nav\";\nimport convertRupiah from \"rupiah-format\";\nimport { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useQuery, useMutation } from \"react-query\";\nimport { API } from \"../../config/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Detail() {\n  _s();\n\n  let history = useNavigate();\n  let {\n    id\n  } = useParams();\n  let api = API(); // Fetching product data from database\n\n  let {\n    data: product,\n    refetch\n  } = useQuery(\"Cache\", async () => {\n    const config = {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Basic \" + localStorage.token\n      }\n    };\n    const response = await api.get(\"/product/\" + id, config);\n    return response.data;\n  }); // Create config Snap payment page with useEffect here ...\n\n  useEffect(() => {\n    //change this to the script source you want to load, for example this is snap.js sandbox env\n    const midtransScriptUrl = \"https://app.sandbox.midtrans.com/snap/snap.js\"; //change this according to your client-key\n\n    const myMidtransClientKey = \"SB-Mid-client-A3OQbgr_e6AlRfQc\";\n    let scriptTag = document.createElement(\"script\");\n    scriptTag.src = midtransScriptUrl; // optional if you want to set script attribute\n    // for example snap.js have data-client-key attribute\n\n    scriptTag.setAttribute(\"data-client-key\", myMidtransClientKey);\n    document.body.appendChild(scriptTag);\n    return () => {\n      document.body.removeChild(scriptTag);\n    };\n  }, []);\n  const handleBuy = useMutation(async () => {\n    try {\n      // Get data from product\n      const data = {\n        idProduct: product.id,\n        idSeller: product.user.id,\n        price: product.price\n      }; // Data body\n\n      const body = JSON.stringify(data); // Configuration\n\n      const config = {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Basic \" + localStorage.token,\n          \"Content-type\": \"application/json\"\n        },\n        body\n      }; // Insert transaction data\n\n      const response = await api.post(\"/transaction\", config); // Create variabel for store token payment from response here ...\n\n      const token = response.payment.token; // Init Snap for display payment page with token here ...\n\n      window.snap.pay(token, {\n        onSuccess: function (result) {\n          /* You may add your own implementation here */\n          console.log(result);\n          history.push(\"/profile\");\n        },\n        onPending: function (result) {\n          /* You may add your own implementation here */\n          console.log(result);\n          history.push(\"/profile\");\n        },\n        onError: function (result) {\n          /* You may add your own implementation here */\n          console.log(result);\n        },\n        onClose: function () {\n          /* You may add your own implementation here */\n          alert(\"you closed the popup without finishing the payment\");\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.detailContainer,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.productDetail,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.leftDetail,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product === null || product === void 0 ? void 0 : product.image,\n            alt: \"Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.rightDetail,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.productTitle,\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: product === null || product === void 0 ? void 0 : product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.productStock,\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              children: [\"Stock: \", product === null || product === void 0 ? void 0 : product.qty]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.productDesc,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '2rem',\n                fontWeight: 'bold'\n              },\n              children: \"Description:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product === null || product === void 0 ? void 0 : product.desc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.productPrice,\n            children: convertRupiah.convert(product === null || product === void 0 ? void 0 : product.price)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleBuy.mutate(),\n      children: \"Buy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Detail, \"j5o8rJruEWH08DTaYVx5lFwgOfc=\", false, function () {\n  return [useNavigate, useParams, useQuery, useMutation];\n});\n\n_c = Detail;\nexport default Detail;\n\nvar _c;\n\n$RefreshReg$(_c, \"Detail\");","map":{"version":3,"names":["styles","Navbar","convertRupiah","useEffect","useState","useParams","useNavigate","useQuery","useMutation","API","Detail","history","id","api","data","product","refetch","config","method","headers","Authorization","localStorage","token","response","get","midtransScriptUrl","myMidtransClientKey","scriptTag","document","createElement","src","setAttribute","body","appendChild","removeChild","handleBuy","idProduct","idSeller","user","price","JSON","stringify","post","payment","window","snap","pay","onSuccess","result","console","log","push","onPending","onError","onClose","alert","error","container","detailContainer","productDetail","leftDetail","image","rightDetail","productTitle","name","productStock","qty","productDesc","fontSize","fontWeight","desc","productPrice","convert","mutate"],"sources":["D:/Bootcamp/Stage 2/client/src/Pages/customer/DetailProduct.js"],"sourcesContent":["import styles from \"../../Css/detail.module.css\";\r\nimport Navbar from \"../../Components/nav/nav\";\r\nimport convertRupiah from \"rupiah-format\"\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useQuery, useMutation } from \"react-query\";\r\nimport { API } from \"../../config/api\";\r\n\r\nfunction Detail() {\r\n    let history = useNavigate();\r\n  let { id } = useParams();\r\n  let api = API();\r\n\r\n  // Fetching product data from database\r\n  let { data: product, refetch } = useQuery(\"Cache\", async () => {\r\n    const config = {\r\n      method: \"GET\",\r\n      headers: {\r\n        Authorization: \"Basic \" + localStorage.token,\r\n      },\r\n    };\r\n    const response = await api.get(\"/product/\" + id, config);\r\n    return response.data;\r\n  });\r\n\r\n  // Create config Snap payment page with useEffect here ...\r\n  useEffect(()=>{\r\n    //change this to the script source you want to load, for example this is snap.js sandbox env\r\n    const midtransScriptUrl = \"https://app.sandbox.midtrans.com/snap/snap.js\";\r\n    //change this according to your client-key\r\n    const myMidtransClientKey = \"SB-Mid-client-A3OQbgr_e6AlRfQc\";\r\n\r\n    let scriptTag = document.createElement(\"script\");\r\n    scriptTag.src = midtransScriptUrl;\r\n    // optional if you want to set script attribute\r\n    // for example snap.js have data-client-key attribute\r\n    scriptTag.setAttribute(\"data-client-key\", myMidtransClientKey);\r\n\r\n    document.body.appendChild(scriptTag);\r\n    return () => {\r\n      document.body.removeChild(scriptTag);\r\n    };\r\n  },[])\r\n\r\n  const handleBuy = useMutation(async () => {\r\n    try {\r\n      // Get data from product\r\n      const data = {\r\n        idProduct: product.id,\r\n        idSeller: product.user.id,\r\n        price: product.price,\r\n      };\r\n\r\n      // Data body\r\n      const body = JSON.stringify(data);\r\n\r\n      // Configuration\r\n      const config = {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: \"Basic \" + localStorage.token,\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n        body,\r\n      };\r\n\r\n      // Insert transaction data\r\n      const response = await api.post(\"/transaction\", config);\r\n\r\n      // Create variabel for store token payment from response here ...\r\n      const token = response.payment.token;\r\n\r\n      // Init Snap for display payment page with token here ...\r\n      window.snap.pay(token, {\r\n        onSuccess: function (result) {\r\n          /* You may add your own implementation here */\r\n          console.log(result);\r\n          history.push(\"/profile\");\r\n        },\r\n        onPending: function (result) {\r\n          /* You may add your own implementation here */\r\n          console.log(result);\r\n          history.push(\"/profile\");\r\n        },\r\n        onError: function (result) {\r\n          /* You may add your own implementation here */\r\n          console.log(result);\r\n        },\r\n        onClose: function () {\r\n          /* You may add your own implementation here */\r\n          alert(\"you closed the popup without finishing the payment\");\r\n        },\r\n      })\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  });\r\n  return (\r\n    <div className={styles.container}>\r\n      <Navbar />\r\n      <div className={styles.detailContainer}>\r\n        <div className={styles.productDetail}>\r\n          <div className={styles.leftDetail}>\r\n            <img src={product?.image} alt=\"Product\" />\r\n          </div>\r\n          <div className={styles.rightDetail}>\r\n            <div className={styles.productTitle}>\r\n              <h1>{product?.name}</h1>\r\n            </div>\r\n            <div className={styles.productStock}>\r\n              <small>Stock: {product?.qty}</small>\r\n            </div>\r\n            <div className={styles.productDesc}>\r\n              <p style={{\r\n                fontSize: '2rem',\r\n                fontWeight: 'bold'\r\n              }}>Description:</p>\r\n              <p>\r\n                {product?.desc}\r\n              </p>\r\n            </div>\r\n            <div className={styles.productPrice}>{convertRupiah.convert(product?.price)}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <button onClick={() => handleBuy.mutate()}>Buy</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Detail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}