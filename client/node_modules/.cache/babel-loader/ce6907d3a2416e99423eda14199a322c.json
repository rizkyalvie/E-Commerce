{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bootcamp\\\\Stage 2\\\\client\\\\src\\\\Components\\\\login\\\\loginCard.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"../../Css/login.module.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useContext, useState } from 'react';\nimport { UserContext } from '../../context/userContext'; // Import useMutation from react-query here ...\n\nimport { useMutation } from 'react-query';\nimport { API, setAuthToken } from '../../config/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginCard() {\n  _s();\n\n  let navigate = useNavigate();\n  const title = 'Login';\n  document.title = 'DumbMerch | ' + title;\n  const [state, dispatch] = useContext(UserContext);\n  console.log(state);\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n  const {\n    email,\n    password\n  } = form;\n\n  const handleChange = e => {\n    setForm({ ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = useMutation(async e => {\n    try {\n      e.preventDefault();\n      const config = {\n        headers: {\n          'Content-type': 'application/json'\n        }\n      };\n\n      if (localStorage.token) {\n        setAuthToken(localStorage.token);\n      }\n\n      const body = JSON.stringify(form);\n      const response = await API.post('/login', body, config);\n      const userStatus = response.data.data.status;\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: response.user.user\n      });\n\n      if (userStatus === 'seller') {\n        navigate('/');\n      } else if (userStatus === 'user') {\n        navigate('/complain-admin');\n      }\n    } catch (error) {}\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.loginCard,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => handleSubmit.mutate(e),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.cardForm,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange,\n          name: \"email\",\n          type: \"text\",\n          value: email,\n          placeholder: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange,\n          name: \"password\",\n          value: password,\n          type: \"password\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginCard, \"0akxykfCj6jWPTX/W+I0d5iLfqU=\", false, function () {\n  return [useNavigate, useMutation];\n});\n\n_c = LoginCard;\nexport default LoginCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginCard\");","map":{"version":3,"names":["styles","useNavigate","useContext","useState","UserContext","useMutation","API","setAuthToken","LoginCard","navigate","title","document","state","dispatch","console","log","form","setForm","email","password","handleChange","e","target","name","value","handleSubmit","preventDefault","config","headers","localStorage","token","body","JSON","stringify","response","post","userStatus","data","status","type","payload","user","error","loginCard","mutate","cardForm"],"sources":["D:/Bootcamp/Stage 2/client/src/Components/login/loginCard.js"],"sourcesContent":["import styles from \"../../Css/login.module.css\";\r\nimport {useNavigate} from \"react-router-dom\"\r\nimport { useContext, useState } from 'react';\r\nimport { UserContext } from '../../context/userContext';\r\n\r\n// Import useMutation from react-query here ...\r\nimport { useMutation } from 'react-query'\r\n\r\nimport { API, setAuthToken } from '../../config/api'\r\n\r\n\r\n\r\nfunction LoginCard() {\r\n  let navigate = useNavigate()\r\n\r\n  const title = 'Login';\r\n  document.title = 'DumbMerch | ' + title;\r\n\r\n  const [state, dispatch] = useContext(UserContext);\r\n\r\n  console.log(state)\r\n\r\n  const [form, setForm] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const { email, password } = form;\r\n\r\n  const handleChange = (e) => {\r\n    setForm({\r\n      ...form,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = useMutation(async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n  \r\n      const config = {\r\n        headers: {\r\n          'Content-type': 'application/json',\r\n        },\r\n      };\r\n\r\n      if(localStorage.token){\r\n        setAuthToken(localStorage.token)\r\n      }\r\n  \r\n      const body = JSON.stringify(form);\r\n  \r\n      const response = await API.post('/login', body, config);\r\n  \r\n      const userStatus = response.data.data.status\r\n\r\n      dispatch({\r\n        type: 'LOGIN_SUCCESS',\r\n        payload: response.user.user\r\n      })\r\n      \r\n      if(userStatus === 'seller'){\r\n        navigate('/')\r\n      } else if(userStatus === 'user' ){ \r\n        navigate('/complain-admin')\r\n      }\r\n\r\n\r\n      \r\n    } catch (error) {\r\n    }\r\n  });\r\n\r\n  \r\n  return (\r\n    <div className={styles.loginCard}>\r\n      <h1>Login</h1>\r\n      <form onSubmit={(e) => handleSubmit.mutate(e)}>\r\n        <div className={styles.cardForm}>\r\n          <input onChange={handleChange} name=\"email\" type=\"text\" value={email} placeholder=\"Email\" />\r\n          <input onChange={handleChange} name=\"password\" value={password} type=\"password\" placeholder=\"Password\" />\r\n          <button type=\"submit\">Login</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}